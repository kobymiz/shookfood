<header class="gallery-masthead">
  <div class="container px-4 px-lg-5 h-100">
    <div class="row gx-4 gx-lg-5 h-100">
      <div class="col-lg-8 align-self-end">
        <h2 class="text-warning font-weight-bold">שוק האוכל של אורן וקובי</h2>
        <h1 class="text-white font-weight-bold">הוספה/עדכון מתכון</h1>
        <form [formGroup]="recipeForm" (ngSubmit)="onSubmit()" class="text-light mb-5">
          <div class="form-group mb-3">
            <label for="recipe_name">בחירת מתכון:</label>
            <select class="form-control" (change)="onSelectRecipe($event)">
              <option value="" selected>מתכון חדש</option>
              <option *ngFor="let recipe of allRecipes" [value]="recipe.id">{{ recipe.recipe_name }}</option>
            </select>
          </div>
          <div class="form-group mb-3">
            <label for="recipe_name">שם מתכון:</label>
            <input type="text" formControlName="recipe_name" class="form-control" id="recipe_name">
          </div>
          <div class="form-group mb-3">
            <label for="description">תיאור:</label>
            <textarea formControlName="description" class="form-control" id="description" rows="3"></textarea>
          </div>
          <div class="form-group mb-3">
            <label for="category_id">קטגוריה:</label>
            <select formControlName="category_id" class="form-control" id="category_id">
              <option value="" disabled selected>Select a category</option>
              <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
            </select>
          </div>
          <div class="form-group mb-3">
            <label for="image">תמונה:</label>
            <input type="text" formControlName="image" class="form-control" id="image">
          </div>
          <hr/>
            <div formArrayName="ingredients">
              <h5>רשימת מרכיבים</h5>
              <ol>
              <table class="table">
                <thead>
                  <tr>
                    <th></th>
                    <th>שם</th>
                    <th>כמות</th>
                    <th>יחידות</th>
                    <th></th> <!-- Empty header for delete button column -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ingredient of ingredients.controls; let i=index" [formGroupName]="i">
                    <td><li>&nbsp;</li></td>
                    <td>
                      <input type="text" formControlName="name" class="form-control" id="name">
                    </td>
                    <td>
                      <input type="number" formControlName="quantity" class="form-control" id="quantity">
                    </td>
                    <td>
                      <input type="text" formControlName="unit" class="form-control" id="unit">
                    </td>
                    <td>
                      <button type="button" class="btn btn-danger" (click)="removeIngredient(i)"><span class="bi bi-trash"></span></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ol>
            </div>
            <button type="button" class="btn btn-primary mb-5" (click)="addIngredient()"><span class="bi bi-plus-circle ml-3"></span>&nbsp;הוספה</button>
            <hr/>
            <div formArrayName="instructions">
              <h5>הוראות הכנה</h5>
              <ol>
              <table class="table">
                <thead>
                  <tr>
                    <th>שלב</th>
                    <th>תיאור</th>
                    <th></th> <!-- Empty header for delete button column -->
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let instruction of instructions.controls; let i=index" [formGroupName]="i">
                    <td><li>&nbsp;</li></td>
                    <td>
                      <textarea [formControl]="castInstructionToFormControl(instruction)" class="form-control" id="instruction" rows="2"></textarea>
                    </td>
                    <td>
                      <button type="button" class="btn btn-danger" (click)="removeInstruction(i)"><span class="bi bi-trash"></span></button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ol>
            </div>
            <button type="button" class="btn btn-primary mb-5" (click)="addInstruction()"><span class="bi bi-plus-circle ml-3"></span>&nbsp;הוספה</button>

          <button type="submit" class="btn btn-primary mt-5"><span class="bi bi-save"></span>&nbsp;שמירה</button>
        </form>
      </div>
    </div>
  </div>
