{"version":3,"file":"angular2-image-gallery.mjs","sources":["../../../projects/angular2-image-gallery/src/lib/services/image.service.ts","../../../projects/angular2-image-gallery/src/lib/viewer/viewer.component.ts","../../../projects/angular2-image-gallery/src/lib/viewer/viewer.component.html","../../../projects/angular2-image-gallery/src/lib/gallery/gallery.component.ts","../../../projects/angular2-image-gallery/src/lib/gallery/gallery.component.html","../../../projects/angular2-image-gallery/src/lib/angular2-image-gallery.module.ts","../../../projects/angular2-image-gallery/src/public_api.ts","../../../projects/angular2-image-gallery/src/angular2-image-gallery.ts"],"sourcesContent":["import { Injectable } from '@angular/core'\r\nimport { Observable, Subject } from 'rxjs'\r\nimport { ImageMetadata } from '../data/image-metadata'\r\n\r\n@Injectable()\r\nexport class ImageService {\r\n  private imagesUpdatedSource = new Subject<ImageMetadata[]>()\r\n  private imageSelectedIndexUpdatedSource = new Subject<number>()\r\n  private showImageViewerSource = new Subject<boolean>()\r\n\r\n  imagesUpdated$: Observable<ImageMetadata[]> = this.imagesUpdatedSource.asObservable()\r\n  imageSelectedIndexUpdated$: Observable<number> = this.imageSelectedIndexUpdatedSource.asObservable()\r\n  showImageViewerChanged$: Observable<boolean> = this.showImageViewerSource.asObservable()\r\n\r\n  updateImages(images: ImageMetadata[]): void {\r\n    this.imagesUpdatedSource.next(images)\r\n  }\r\n\r\n  updateSelectedImageIndex(newIndex: number): void {\r\n    this.imageSelectedIndexUpdatedSource.next(newIndex)\r\n  }\r\n\r\n  showImageViewer(show: boolean): void {\r\n    this.showImageViewerSource.next(show)\r\n  }\r\n}\r\n","import { ImageService } from '../services/image.service'\r\nimport { Component, Input } from '@angular/core'\r\nimport { animate, state, style, transition, trigger } from '@angular/animations'\r\nimport { DomSanitizer } from '@angular/platform-browser'\r\nimport { ImageMetadata } from '../data/image-metadata'\r\n\r\n@Component({\r\n  selector: 'viewer',\r\n  templateUrl: './viewer.component.html',\r\n  styleUrls: ['./viewer.component.sass'],\r\n  host: {\r\n    '(document:keydown)': 'onKeydown($event)',\r\n  },\r\n  animations: [\r\n    trigger('imageTransition', [\r\n      state(\r\n        'enterFromRight',\r\n        style({\r\n          opacity: 1,\r\n          transform: 'translate(0px, 0px)',\r\n        })\r\n      ),\r\n      state(\r\n        'enterFromLeft',\r\n        style({\r\n          opacity: 1,\r\n          transform: 'translate(0px, 0px)',\r\n        })\r\n      ),\r\n      state(\r\n        'leaveToLeft',\r\n        style({\r\n          opacity: 0,\r\n          transform: 'translate(-100px, 0px)',\r\n        })\r\n      ),\r\n      state(\r\n        'leaveToRight',\r\n        style({\r\n          opacity: 0,\r\n          transform: 'translate(100px, 0px)',\r\n        })\r\n      ),\r\n      transition('* => enterFromRight', [\r\n        style({\r\n          opacity: 0,\r\n          transform: 'translate(30px, 0px)',\r\n        }),\r\n        animate('250ms 500ms ease-in'),\r\n      ]),\r\n      transition('* => enterFromLeft', [\r\n        style({\r\n          opacity: 0,\r\n          transform: 'translate(-30px, 0px)',\r\n        }),\r\n        animate('250ms 500ms ease-in'),\r\n      ]),\r\n      transition('* => leaveToLeft', [\r\n        style({\r\n          opacity: 1,\r\n        }),\r\n        animate('250ms ease-out'),\r\n      ]),\r\n      transition('* => leaveToRight', [\r\n        style({\r\n          opacity: 1,\r\n        }),\r\n        animate('250ms ease-out'),\r\n      ]),\r\n    ]),\r\n    trigger('showViewerTransition', [\r\n      state(\r\n        'true',\r\n        style({\r\n          opacity: 1,\r\n        })\r\n      ),\r\n      state(\r\n        'void',\r\n        style({\r\n          opacity: 0,\r\n        })\r\n      ),\r\n      transition('void => *', [\r\n        style({\r\n          opacity: 0,\r\n        }),\r\n        animate('1000ms ease-in'),\r\n      ]),\r\n      transition('* => void', [\r\n        style({\r\n          opacity: 1,\r\n        }),\r\n        animate('500ms ease-out'),\r\n      ]),\r\n    ]),\r\n  ],\r\n})\r\nexport class ViewerComponent {\r\n  showViewer: boolean\r\n  images: Array<ImageMetadata> = []\r\n  currentIdx: number = 0\r\n  leftArrowVisible: boolean = true\r\n  rightArrowVisible: boolean = true\r\n  categorySelected: string = 'preview_xxs'\r\n  transform: number\r\n  math: Math\r\n  private qualitySelectorShown: boolean = false\r\n  private qualitySelected: string = 'auto'\r\n\r\n  @Input('baseImagesURL') baseImagesURL = ''\r\n\r\n  constructor(private imageService: ImageService, private sanitizer: DomSanitizer) {\r\n    imageService.imagesUpdated$.subscribe((images) => {\r\n      this.images = images\r\n    })\r\n    imageService.imageSelectedIndexUpdated$.subscribe((newIndex) => {\r\n      this.currentIdx = newIndex\r\n      this.images.forEach((image) => (image['active'] = false))\r\n      this.images[this.currentIdx]['active'] = true\r\n      this.transform = 0\r\n      this.updateQuality()\r\n    })\r\n    imageService.showImageViewerChanged$.subscribe((showViewer) => {\r\n      this.showViewer = showViewer\r\n    })\r\n    this.math = Math\r\n  }\r\n\r\n  get leftArrowActive(): boolean {\r\n    return this.currentIdx > 0\r\n  }\r\n\r\n  get rightArrowActive(): boolean {\r\n    return this.currentIdx < this.images.length - 1\r\n  }\r\n\r\n  pan(swipe: any): void {\r\n    this.transform = swipe.deltaX\r\n  }\r\n\r\n  onResize(): void {\r\n    this.images.forEach((image) => {\r\n      image['viewerImageLoaded'] = false\r\n      image['active'] = false\r\n    })\r\n    this.updateImage()\r\n  }\r\n\r\n  showQualitySelector(): void {\r\n    this.qualitySelectorShown = !this.qualitySelectorShown\r\n  }\r\n\r\n  qualityChanged(newQuality: any): void {\r\n    this.qualitySelected = newQuality\r\n    this.updateImage()\r\n  }\r\n\r\n  imageLoaded(image: any): void {\r\n    image['viewerImageLoaded'] = true\r\n  }\r\n\r\n  /**\r\n   * direction (-1: left, 1: right)\r\n   * swipe (user swiped)\r\n   */\r\n  navigate(direction: number, swipe: any): void {\r\n    if ((direction === 1 && this.currentIdx < this.images.length - 1) || (direction === -1 && this.currentIdx > 0)) {\r\n      if (direction == -1) {\r\n        this.images[this.currentIdx]['transition'] = 'leaveToRight'\r\n        this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft'\r\n      } else {\r\n        this.images[this.currentIdx]['transition'] = 'leaveToLeft'\r\n        this.images[this.currentIdx + 1]['transition'] = 'enterFromRight'\r\n      }\r\n      this.currentIdx += direction\r\n\r\n      if (swipe) {\r\n        this.hideNavigationArrows()\r\n      } else {\r\n        this.showNavigationArrows()\r\n      }\r\n      this.updateImage()\r\n    }\r\n  }\r\n\r\n  showNavigationArrows(): void {\r\n    this.leftArrowVisible = true\r\n    this.rightArrowVisible = true\r\n  }\r\n\r\n  closeViewer(): void {\r\n    this.images.forEach((image) => (image['transition'] = undefined))\r\n    this.images.forEach((image) => (image['active'] = false))\r\n    this.imageService.showImageViewer(false)\r\n  }\r\n\r\n  onKeydown(event: KeyboardEvent): void {\r\n    const prevent = [37, 39, 27, 36, 35].find((no) => no === event.keyCode)\r\n    if (prevent) {\r\n      event.preventDefault()\r\n    }\r\n\r\n    switch (prevent) {\r\n      case 37:\r\n        // navigate left\r\n        this.navigate(-1, false)\r\n        break\r\n      case 39:\r\n        // navigate right\r\n        this.navigate(1, false)\r\n        break\r\n      case 27:\r\n        // esc\r\n        this.closeViewer()\r\n        break\r\n      case 36:\r\n        // pos 1\r\n        this.images[this.currentIdx]['transition'] = 'leaveToRight'\r\n        this.currentIdx = 0\r\n        this.images[this.currentIdx]['transition'] = 'enterFromLeft'\r\n        this.updateImage()\r\n        break\r\n      case 35:\r\n        // end\r\n        this.images[this.currentIdx]['transition'] = 'leaveToLeft'\r\n        this.currentIdx = this.images.length - 1\r\n        this.images[this.currentIdx]['transition'] = 'enterFromRight'\r\n        this.updateImage()\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  sanitizedImageUrl(img: any, index: number) {\r\n    return this.sanitizer.bypassSecurityTrustStyle(this.rawImageUrl(img, index))\r\n  }\r\n\r\n  private rawImageUrl(img: any, index: number) {\r\n    if (img['viewerImageLoaded']) {\r\n      return `url('${this.baseImagesURL}${img.resolutions[this.categorySelected].path}')`\r\n    } else if (Math.abs(this.currentIdx - index) <= 1) {\r\n      return `url('${this.baseImagesURL}${img.resolutions['preview_xxs'].path}')`\r\n    }\r\n    return ''\r\n  }\r\n\r\n  private hideNavigationArrows(): void {\r\n    this.leftArrowVisible = false\r\n    this.rightArrowVisible = false\r\n  }\r\n\r\n  private updateImage(): void {\r\n    // wait for animation to end\r\n    setTimeout(() => {\r\n      this.updateQuality()\r\n      this.images[this.currentIdx]['active'] = true\r\n      this.images.forEach((image) => {\r\n        if (image != this.images[this.currentIdx]) {\r\n          image['active'] = false\r\n          this.transform = 0\r\n        }\r\n      })\r\n    }, 500)\r\n  }\r\n\r\n  private updateQuality(): void {\r\n    const screenWidth = window.innerWidth\r\n    const screenHeight = window.innerHeight\r\n\r\n    switch (this.qualitySelected) {\r\n      case 'auto': {\r\n        this.categorySelected = 'preview_xxs'\r\n\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_xxs'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_xxs'].height\r\n        ) {\r\n          this.categorySelected = 'preview_xs'\r\n        }\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_xs'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_xs'].height\r\n        ) {\r\n          this.categorySelected = 'preview_s'\r\n        }\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_s'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_s'].height\r\n        ) {\r\n          this.categorySelected = 'preview_m'\r\n        }\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_m'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_m'].height\r\n        ) {\r\n          this.categorySelected = 'preview_l'\r\n        }\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_l'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_l'].height\r\n        ) {\r\n          this.categorySelected = 'preview_xl'\r\n        }\r\n        if (\r\n          screenWidth > this.images[this.currentIdx].resolutions['preview_xl'].width &&\r\n          screenHeight > this.images[this.currentIdx].resolutions['preview_xl'].height\r\n        ) {\r\n          this.categorySelected = 'raw'\r\n        }\r\n        break\r\n      }\r\n      case 'low': {\r\n        this.categorySelected = 'preview_xxs'\r\n        break\r\n      }\r\n      case 'mid': {\r\n        this.categorySelected = 'preview_m'\r\n        break\r\n      }\r\n      case 'high': {\r\n        this.categorySelected = 'raw'\r\n        break\r\n      }\r\n      default: {\r\n        this.categorySelected = 'preview_m'\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div\r\n  class=\"outerContainer\"\r\n  (window:resize)=\"onResize()\"\r\n  *ngIf=\"showViewer\"\r\n  [@showViewerTransition]=\"showViewer\">\r\n  <img\r\n    [ngClass]=\"{ activeArrow: leftArrowActive }\"\r\n    class=\"arrow left\"\r\n    src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\r\n    [hidden]=\"!leftArrowVisible\"\r\n    (click)=\"navigate(-1, false)\" />\r\n  <img\r\n    [ngClass]=\"{ activeArrow: rightArrowActive }\"\r\n    class=\"arrow right\"\r\n    src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\"\r\n    [hidden]=\"!rightArrowVisible\"\r\n    (click)=\"navigate(1, false)\" />\r\n\r\n  <div class=\"buttonContainer\">\r\n    <img\r\n      class=\"action close\"\r\n      src=\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\"\r\n      (click)=\"closeViewer()\" />\r\n  </div>\r\n\r\n  <div\r\n    class=\"imageContainer\"\r\n    (click)=\"showNavigationArrows()\"\r\n    (swipeleft)=\"navigate(1, $event)\"\r\n    (swiperight)=\"navigate(-1, $event)\"\r\n    (pan)=\"pan($event)\">\r\n    <div\r\n      *ngFor=\"let img of images; let j = index\"\r\n      class=\"image\"\r\n      [class.active]=\"img['active']\"\r\n      [style.background-image]=\"sanitizedImageUrl(img, j)\"\r\n      [style.left]=\"transform + 'px'\"\r\n      [@imageTransition]=\"img['transition']\"></div>\r\n\r\n    <img\r\n      *ngFor=\"let img of images; let j = index\"\r\n      class=\"preloading-image\"\r\n      (load)=\"imageLoaded(img)\"\r\n      src=\"{{ math.abs(currentIdx - j) <= 1 ? img['resolutions'][categorySelected]['path'] : '' }}\" />\r\n  </div>\r\n</div>\r\n","import {\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  QueryList,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewChildren,\r\n} from '@angular/core'\r\nimport { ImageService } from '../services/image.service'\r\nimport { Subscription } from 'rxjs/internal/Subscription'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { ImageMetadata } from '../data/image-metadata'\r\n\r\n@Component({\r\n  selector: 'gallery',\r\n  templateUrl: './gallery.component.html',\r\n  styleUrls: ['./gallery.component.sass'],\r\n})\r\nexport class GalleryComponent implements OnInit, OnDestroy, OnChanges {\r\n  gallery: any[] = []\r\n  baseURL = ''\r\n  imageDataStaticPath: string = 'assets/img/gallery/'\r\n  imageMetadataUri: string = ''\r\n  dataFileName: string = 'data.json'\r\n  images: ImageMetadata[] = []\r\n  minimalQualityCategory = 'preview_xxs'\r\n  viewerSubscription: Subscription\r\n  rowIndex: number = 0\r\n  rightArrowInactive: boolean = false\r\n  leftArrowInactive: boolean = false\r\n\r\n  @Input('flexBorderSize') providedImageMargin: number = 3\r\n  @Input('flexImageSize') providedImageSize: number = 7\r\n  @Input('galleryName') providedGalleryName: string = ''\r\n  @Input('metadataUri') providedMetadataUri: string = undefined\r\n  @Input('maxRowsPerPage') rowsPerPage: number = 200\r\n  @Input('includeViewer') includeViewer = true\r\n  @Input('lazyLoadGalleryImages') lazyLoadGalleryImages = true\r\n  @Input('baseImagesURL') baseImagesURL = ''\r\n\r\n  @Output() viewerChange = new EventEmitter<boolean>()\r\n\r\n  @ViewChild('galleryContainer', { static: true }) galleryContainer: ElementRef\r\n  @ViewChildren('imageElement') imageElements: QueryList<any>\r\n\r\n  @HostListener('window:scroll', ['$event']) triggerCycle(_: any): void {\r\n    this.loadImagesInsideView()\r\n  }\r\n\r\n  @HostListener('resize', ['$event']) windowResize(_: any): void {\r\n    this.render()\r\n  }\r\n\r\n  constructor(public imageService: ImageService, public http: HttpClient, public changeDetectorRef: ChangeDetectorRef) {}\r\n\r\n  ngOnInit(): void {\r\n    this.fetchDataAndRender()\r\n    this.viewerSubscription = this.imageService.showImageViewerChanged$.subscribe((visibility: boolean) =>\r\n      this.viewerChange.emit(visibility)\r\n    )\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // input params changed\r\n    this.determineBaseURL();\r\n    this.imageMetadataUri = this.determineMetadataPath()\r\n    this.imageDataStaticPath = this.baseURL + this.baseURL;\r\n\r\n    if (!changes['providedGalleryName']?.isFirstChange()) {\r\n      this.fetchDataAndRender()\r\n    }\r\n\r\n    this.render()\r\n  }\r\n\r\n  determineBaseURL() {\r\n    console.log(\"Determine baseURL start\");\r\n    if(this.baseImagesURL.length == 0){\r\n      console.log(\"Aborting, No baseImageURL input param.\");\r\n      this.baseURL = '';\r\n      return;\r\n    }\r\n\r\n    this.baseURL = this.baseImagesURL.endsWith('/') ? this.baseImagesURL : this.baseImagesURL + '/';\r\n    console.log(\"baseURL: \", this.baseURL);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.viewerSubscription) {\r\n      this.viewerSubscription.unsubscribe()\r\n    }\r\n  }\r\n\r\n  openImageViewer(img: any): void {\r\n    this.imageService.updateImages(this.images)\r\n    this.imageService.updateSelectedImageIndex(this.images.indexOf(img))\r\n    this.imageService.showImageViewer(true)\r\n  }\r\n\r\n  /**\r\n   * direction (-1: left, 1: right)\r\n   */\r\n  navigate(direction: number): void {\r\n    if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage) || (direction === -1 && this.rowIndex > 0)) {\r\n      this.rowIndex += this.rowsPerPage * direction\r\n    }\r\n    this.refreshArrowState()\r\n    this.render()\r\n  }\r\n\r\n  calcImageMargin(): number {\r\n    const galleryWidth = this.getGalleryWidth()\r\n    const ratio = galleryWidth / 1920\r\n    return Math.round(Math.max(1, this.providedImageMargin * ratio))\r\n  }\r\n\r\n  private fetchDataAndRender(): void {\r\n    this.http.get(this.imageMetadataUri).subscribe((data: ImageMetadata[]) => {\r\n      this.images = data\r\n      this.imageService.updateImages(this.images)\r\n\r\n      this.images.forEach((image) => {\r\n        image['viewerImageLoaded'] = false\r\n        image['srcAfterFocus'] = ''\r\n      })\r\n\r\n      this.render()\r\n    }, this.handleErrorWhenLoadingImages)\r\n  }\r\n\r\n  private handleErrorWhenLoadingImages = (err) => {\r\n    if (this.providedMetadataUri) {\r\n      console.error(`Provided endpoint '${this.providedMetadataUri}' did not serve metadata correctly or in the expected format.\r\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\r\n      Original error: ${err}`)\r\n    } else {\r\n      console.error(`Did you run the convert script from angular2-image-gallery for your images first? Original error: ${err}`)\r\n    }\r\n  }\r\n\r\n  private determineMetadataPath() {\r\n    let imageMetadataUri = this.providedMetadataUri\r\n\r\n    if (!this.providedMetadataUri) {\r\n      imageMetadataUri =\r\n        this.providedGalleryName !== ''\r\n          ? `${this.baseURL}${this.imageDataStaticPath + this.providedGalleryName}/${this.dataFileName}`\r\n          : this.baseURL + this.imageDataStaticPath + this.dataFileName\r\n    }\r\n\r\n    console.log(\"Returning metadata file uri: \", imageMetadataUri);\r\n    return imageMetadataUri\r\n  }\r\n\r\n  private render(): void {\r\n    this.gallery = []\r\n\r\n    let tempRow = [this.images[0]]\r\n    let currentRowIndex = 0\r\n    let i = 0\r\n\r\n    for (i; i < this.images.length; i++) {\r\n      while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {\r\n        i++\r\n      }\r\n      if (this.images[i + 1]) {\r\n        tempRow.pop()\r\n      }\r\n      this.gallery[currentRowIndex++] = tempRow\r\n\r\n      tempRow = [this.images[i + 1]]\r\n    }\r\n\r\n    this.scaleGallery()\r\n  }\r\n\r\n  private shouldAddCandidate(imgRow: any[], candidate: any): boolean {\r\n    const oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\r\n    imgRow.push(candidate)\r\n    const newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\r\n\r\n    return Math.abs(oldDifference) > Math.abs(newDifference)\r\n  }\r\n\r\n  private calcRowHeight(imgRow: any[]): number {\r\n    const originalRowWidth = this.calcOriginalRowWidth(imgRow)\r\n\r\n    const ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth\r\n    const rowHeight = imgRow[0].resolutions[this.minimalQualityCategory].height * ratio\r\n\r\n    return rowHeight\r\n  }\r\n\r\n  private calcOriginalRowWidth(imgRow: any[]): number {\r\n    let originalRowWidth = 0\r\n    imgRow.forEach((img) => {\r\n      const individualRatio = this.calcIdealHeight() / img.resolutions[this.minimalQualityCategory].height\r\n      img.resolutions[this.minimalQualityCategory].width = img.resolutions[this.minimalQualityCategory].width * individualRatio\r\n      img.resolutions[this.minimalQualityCategory].height = this.calcIdealHeight()\r\n      originalRowWidth += img.resolutions[this.minimalQualityCategory].width\r\n    })\r\n\r\n    return originalRowWidth\r\n  }\r\n\r\n  private isPaginationActive = () => !this.rightArrowInactive || !this.leftArrowInactive\r\n  private calcIdealHeight = (): number => this.getGalleryWidth() / (80 / this.providedImageSize) + 100\r\n  private getGalleryWidth = (): number => this.galleryContainer.nativeElement.clientWidth\r\n  private isLastRow = (imgRow) => imgRow === this.gallery[this.gallery.length - 1]\r\n\r\n  private scaleGallery(): void {\r\n    let maximumGalleryImageHeight = 0\r\n\r\n    this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage).forEach((imgRow) => {\r\n      const originalRowWidth = this.calcOriginalRowWidth(imgRow)\r\n      const calculatedRowWidth = this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()\r\n\r\n      const ratio = this.isLastRow(imgRow) ? 1 : calculatedRowWidth / originalRowWidth\r\n\r\n      imgRow.forEach((img) => {\r\n        img.width = img.resolutions[this.minimalQualityCategory].width * ratio\r\n        img.height = img.resolutions[this.minimalQualityCategory].height * ratio\r\n        maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img.height)\r\n      })\r\n    })\r\n\r\n    this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs'\r\n\r\n    this.refreshArrowState()\r\n    this.loadImagesInsideView()\r\n  }\r\n\r\n  private loadImagesInsideView() {\r\n    this.changeDetectorRef.detectChanges()\r\n\r\n    this.images.forEach((image: ImageMetadata, index: number) => {\r\n      const imageElements = this.imageElements.toArray()\r\n\r\n      if (this.isPaginationActive() || this.isScrolledIntoView(imageElements[index]?.nativeElement) || !this.lazyLoadGalleryImages) {\r\n        image['srcAfterFocus'] = this.baseImagesURL + image.resolutions[this.minimalQualityCategory].path\r\n      }\r\n    })\r\n  }\r\n\r\n  private isScrolledIntoView(element: HTMLElement): boolean {\r\n    if (!element) {\r\n      return false\r\n    }\r\n    const elementTop = element.getBoundingClientRect().top\r\n    const elementBottom = element.getBoundingClientRect().bottom\r\n    const viewableHeight = document.documentElement.clientHeight\r\n\r\n    return elementTop < viewableHeight && elementBottom >= 0\r\n  }\r\n\r\n  private refreshArrowState(): void {\r\n    this.leftArrowInactive = this.rowIndex == 0\r\n    this.rightArrowInactive = this.rowIndex >= this.gallery.length - this.rowsPerPage\r\n  }\r\n}\r\n","<div #galleryContainer class=\"galleryContainer\">\r\n  <div class=\"innerGalleryContainer\">\r\n    <div\r\n      *ngFor=\"let imgrow of gallery | slice: rowIndex:rowIndex + rowsPerPage; let i = index\"\r\n      class=\"imagerow\"\r\n      [style.margin-bottom.px]=\"calcImageMargin()\">\r\n      <img\r\n        #imageElement\r\n        *ngFor=\"let img of imgrow; let j = index\"\r\n        class=\"thumbnail\"\r\n        [style.width.px]=\"img['width']\"\r\n        [style.height.px]=\"img['height']\"\r\n        (click)=\"openImageViewer(img)\"\r\n        [src]=\"img['srcAfterFocus']\"\r\n        [style.background]=\"img.dominantColor\"\r\n        [style.margin-right.px]=\"calcImageMargin()\" />\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"pagerContainer\" *ngIf=\"!rightArrowInactive || !leftArrowInactive\">\r\n    <img\r\n      [ngClass]=\"{ inactive: leftArrowInactive }\"\r\n      class=\"pager left\"\r\n      src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\"\r\n      (click)=\"navigate(-1)\" />\r\n    <img\r\n      [ngClass]=\"{ inactive: rightArrowInactive }\"\r\n      class=\"pager right\"\r\n      src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\"\r\n      (click)=\"navigate(1)\" />\r\n  </div>\r\n</div>\r\n\r\n<viewer *ngIf=\"includeViewer\" [baseImagesURL] = \"baseURL\"></viewer>\r\n","import { NgModule } from '@angular/core'\r\nimport { ImageService } from './services/image.service'\r\nimport { GalleryComponent } from './gallery/gallery.component'\r\nimport { ViewerComponent } from './viewer/viewer.component'\r\nimport { CommonModule } from '@angular/common'\r\n\r\nimport 'hammerjs'\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [GalleryComponent, ViewerComponent],\r\n  providers: [ImageService],\r\n  exports: [GalleryComponent, ViewerComponent],\r\n})\r\nexport class Angular2ImageGalleryModule {}\r\n","/*\r\n * Public API Surface of angular2-image-gallery\r\n */\r\n\r\nexport * from './lib/services/image.service'\r\nexport * from './lib/gallery/gallery.component'\r\nexport * from './lib/viewer/viewer.component'\r\nexport * from './lib/angular2-image-gallery.module'\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.ImageService","i2","i4.ViewerComponent"],"mappings":"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"}